{"remainingRequest":"/Users/hashimotokouhei/Desktop/vue-calendar/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hashimotokouhei/Desktop/vue-calendar/frontend/src/components/pages/Calendar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hashimotokouhei/Desktop/vue-calendar/frontend/src/components/pages/Calendar.vue","mtime":1639553185715},{"path":"/Users/hashimotokouhei/Desktop/vue-calendar/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hashimotokouhei/Desktop/vue-calendar/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJzsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgRXZlbnREZXRhaWxEaWFsb2cgZnJvbSAnLi4vZXZlbnRzL0V2ZW50RGV0YWlsRGlhbG9nJzsKaW1wb3J0IEV2ZW50Rm9ybURpYWxvZyBmcm9tICcuLi9ldmVudHMvRXZlbnRGb3JtRGlhbG9nJzsKaW1wb3J0IERheUV2ZW50TGlzdCBmcm9tICcuLi9ldmVudHMvRGF5RXZlbnRMaXN0JzsKaW1wb3J0IENhbGVuZGFyTGlzdCBmcm9tICcuLi9jYWxlbmRhcnMvQ2FsZW5kYXJMaXN0JzsKaW1wb3J0IHsgZ2V0RGVmYXVsdFN0YXJ0QW5kRW5kIH0gZnJvbSAnLi4vLi4vZnVuY3Rpb25zL2RhdGV0aW1lJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2FsZW5kYXInLAogIGNvbXBvbmVudHM6IHsKICAgIEV2ZW50RGV0YWlsRGlhbG9nLAogICAgRXZlbnRGb3JtRGlhbG9nLAogICAgQ2FsZW5kYXJMaXN0LAogICAgRGF5RXZlbnRMaXN0LAogIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIC8vIOihqOekuuOBmeOCi+aciOOCkuaMh+WumgogICAgdmFsdWU6IGZvcm1hdChuZXcgRGF0ZSgpLCAneXl5eS9NTS9kZCcpLAogIH0pLAogIGNvbXB1dGVkOiB7CiAgICAvLyBtYXBHZXR0ZXJz44Gn44Gv44K544OI44Ki44GuU3RhdGXjgpLlkbzjgbPlh7rjgZfjgabkvb/jgYjjgovjgojjgYbjgavjgZnjgosKICAgIC4uLm1hcEdldHRlcnMoJ2V2ZW50cycsIFsnZXZlbnRzJywgJ2V2ZW50JywgJ2lzRWRpdE1vZGUnLCAnY2xpY2tlZERhdGUnXSksCiAgICB0aXRsZSgpIHsKICAgICAgcmV0dXJuIGZvcm1hdChuZXcgRGF0ZSh0aGlzLnZhbHVlKSwgJ3l5eXnlubQgTeaciCcpOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIG1hcEFjdGlvbnPjgafjga/jgrnjg4jjgqLjga5BY3Rpb27jgpLlkbzjgbPlh7rjgZfjgabkvb/nlKjjgafjgY3jgovjgojjgYbjgavjgZnjgosKICAgIC4uLm1hcEFjdGlvbnMoJ2V2ZW50cycsIFsnZmV0Y2hFdmVudHMnLCAnc2V0RXZlbnQnLCAnc2V0RWRpdE1vZGUnLCAnc2V0Q2xpY2tlZERhdGUnXSksCiAgICAvLyB2YWx1ZeWkieaVsOOBq+ePvuWcqOOBq+aXpeOBq+OBoeOCkuS7o+WFpeOBmeOCi+ODoeOCveODg+ODiQogICAgc2V0VG9kYXkoKSB7CiAgICAgIHRoaXMudmFsdWUgPSBmb3JtYXQobmV3IERhdGUoKSwgJ3l5eXkvTU0vZGQnKTsKICAgIH0sCiAgICAvLyBkaWFsb2dNZXNzYWdl5aSJ5pWw44Gr5LqI5a6a5ZCN44KS5Luj5YWl44GZ44KL44Oh44K944OD44OJCiAgICBzaG93RXZlbnQoeyBuYXRpdmVFdmVudCwgZXZlbnQgfSkgewogICAgICB0aGlzLnNldEV2ZW50KGV2ZW50KTsKICAgICAgLy8g5LqI5a6a44KS44Kv44Oq44OD44Kv44GX44Gmc2hvd0V2ZW5044KS5a6f6KGM44GX44Gf5b6M44GraW5pdEV2ZW5044KS5a6f6KGM44GV44Gb44Gq44GE44KI44GG44Gr44GZ44KL5a++562WCiAgICAgIG5hdGl2ZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgfSwKICAgIC8vIOmWieOBmOOCi+ODnOOCv+ODs+OCkuaKvOOBmeOBqOips+e0sOeUu+mdouOBjOmWieOBmOOCi+ODoeOCveODg+ODiQogICAgY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuc2V0RXZlbnQobnVsbCk7CiAgICAgIHRoaXMuc2V0RWRpdE1vZGUoZmFsc2UpOwogICAgICB0aGlzLnNldENsaWNrZWREYXRlKG51bGwpOwogICAgfSwKICAgIC8vIOOCr+ODquODg+OCr+OBl+OBn+WgtOaJgOOBruaXpeS7mOOBjGRhdGXjgavlhaXjgosKICAgIGluaXRFdmVudCh7IGRhdGUgfSkgewogICAgICBpZiAodGhpcy5jbGlja2VkRGF0ZSAhPT0gbnVsbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAvLyDlvJXmlbDjga5kYXRl44Gr44Gv5pel5LuY44GM5paH5a2X5YiX44Gn6L+U44Gj44Gm44GP44KL44Gu44Gn44CBZGF0ZS5yZXBsYWNlKC8tL2csICcvJynjgafjg4/jgqTjg5Xjg7PjgpLjgrnjg6njg4Pjgrfjg6Xjgavnva7mj5vjgZfjgabmnJ/lvoXjgZnjgovlgKTjgavlpInmj5vjgZnjgosKICAgICAgZGF0ZSA9IGRhdGUucmVwbGFjZSgvLS9nLCAnLycpOwogICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBnZXREZWZhdWx0U3RhcnRBbmRFbmQoZGF0ZSk7CiAgICAgIHRoaXMuc2V0RXZlbnQoeyBuYW1lOiAnJywgc3RhcnQsIGVuZCwgdGltZWQ6IHRydWUgfSk7CiAgICAgIHRoaXMuc2V0RWRpdE1vZGUodHJ1ZSk7CiAgICB9LAogICAgc2hvd0RheUV2ZW50cyh7IGRhdGUgfSkgewogICAgICBkYXRlID0gZGF0ZS5yZXBsYWNlKC8tL2csICcvJyk7CiAgICAgIHRoaXMuc2V0Q2xpY2tlZERhdGUoZGF0ZSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Calendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Calendar.vue","sourceRoot":"src/components/pages","sourcesContent":["<template>\n  <div>\n    <v-sheet height=\"6vh\" class=\"d-flex align-center\" color=\"grey lighten-3\">\n      <!--今日の月に戻るボタン-->\n      <v-btn outlined small class=\"ma-4\" @click=\"setToday\">今日</v-btn>\n      <!--prev()メソッドはVuetifyのカレンダーコンポーネントで定義されているメソッド-->\n      <v-btn icon @click=\"$refs.calendar.prev()\">\n        <v-icon>mdi-chevron-left</v-icon>\n      </v-btn>\n      <!--next()メソッドはVuetifyのカレンダーコンポーネントで定義されているメソッド-->\n      <v-btn icon @click=\"$refs.calendar.next()\">\n        <v-icon>mdi-chevron-right</v-icon>\n      </v-btn>\n      <v-toolbar-title>{{ title }}</v-toolbar-title>\n    </v-sheet>\n    <v-sheet height=\"94vh\" class=\"d-flex\">\n      <v-sheet width=\"200px\">\n        <CalendarList />\n      </v-sheet>\n      <v-sheet class=\"flex\">\n        <!--ここにref=\"calendar\"とすることで、v-btnでv-calendarで定義されているメソッドを呼び出せる-->\n        <!--day-formatとmanth-formatはCalendarsコンポーネントに渡すことができるprops-->\n        <v-calendar\n          ref=\"calendar\"\n          v-model=\"value\"\n          :events=\"events\"\n          @change=\"fetchEvents\"\n          locale=\"ja-jp\"\n          :day-format=\"(timestamp) => new Date(timestamp.date).getDate()\"\n          :manth-format=\"(timestamp) => new Date(timestamp.date).getManth() + 1 + '/'\"\n          @click:event=\"showEvent\"\n          @click:day=\"initEvent\"\n          @click:date=\"showDayEvents\"\n          @click:more=\"showDayEvents\"\n        ></v-calendar>\n      </v-sheet>\n    </v-sheet>\n\n    <!--条件式をdialogMessage !== ''とすることで、初期状態ではダイアログが表示されず\n    予定をクリックした時にdialogMessageに値が代入されてダイアログが表示される-->\n    <!--@click:outsideというのはダイアログの外側をクリックした際のイベント発火-->\n    <v-dialog :value=\"event !== null\" @click:outside=\"closeDialog\" width=\"600\">\n      <EventDetailDialog v-if=\"event !== null && !isEditMode\" />\n      <EventFormDialog v-if=\"event !== null && isEditMode\" />\n    </v-dialog>\n\n    <v-dialog :value=\"clickedDate !== null\" @click:outside=\"closeDialog\" width=\"600\">\n      <DayEventList />\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nimport { format } from 'date-fns';\nimport { mapGetters, mapActions } from 'vuex';\nimport EventDetailDialog from '../events/EventDetailDialog';\nimport EventFormDialog from '../events/EventFormDialog';\nimport DayEventList from '../events/DayEventList';\nimport CalendarList from '../calendars/CalendarList';\nimport { getDefaultStartAndEnd } from '../../functions/datetime';\n\nexport default {\n  name: 'Calendar',\n  components: {\n    EventDetailDialog,\n    EventFormDialog,\n    CalendarList,\n    DayEventList,\n  },\n  data: () => ({\n    // 表示する月を指定\n    value: format(new Date(), 'yyyy/MM/dd'),\n  }),\n  computed: {\n    // mapGettersではストアのStateを呼び出して使えるようにする\n    ...mapGetters('events', ['events', 'event', 'isEditMode', 'clickedDate']),\n    title() {\n      return format(new Date(this.value), 'yyyy年 M月');\n    },\n  },\n  methods: {\n    // mapActionsではストアのActionを呼び出して使用できるようにする\n    ...mapActions('events', ['fetchEvents', 'setEvent', 'setEditMode', 'setClickedDate']),\n    // value変数に現在に日にちを代入するメソッド\n    setToday() {\n      this.value = format(new Date(), 'yyyy/MM/dd');\n    },\n    // dialogMessage変数に予定名を代入するメソッド\n    showEvent({ nativeEvent, event }) {\n      this.setEvent(event);\n      // 予定をクリックしてshowEventを実行した後にinitEventを実行させないようにする対策\n      nativeEvent.stopPropagation();\n    },\n    // 閉じるボタンを押すと詳細画面が閉じるメソッド\n    closeDialog() {\n      this.setEvent(null);\n      this.setEditMode(false);\n      this.setClickedDate(null);\n    },\n    // クリックした場所の日付がdateに入る\n    initEvent({ date }) {\n      if (this.clickedDate !== null) {\n        return;\n      }\n      // 引数のdateには日付が文字列で返ってくるので、date.replace(/-/g, '/')でハイフンをスラッシュに置換して期待する値に変換する\n      date = date.replace(/-/g, '/');\n      const [start, end] = getDefaultStartAndEnd(date);\n      this.setEvent({ name: '', start, end, timed: true });\n      this.setEditMode(true);\n    },\n    showDayEvents({ date }) {\n      date = date.replace(/-/g, '/');\n      this.setClickedDate(date);\n    },\n  },\n};\n</script>\n"]}]}