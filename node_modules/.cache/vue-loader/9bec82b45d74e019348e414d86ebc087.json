{"remainingRequest":"/Users/hashimotokouhei/Desktop/vue-calendar/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hashimotokouhei/Desktop/vue-calendar/frontend/src/components/events/EventFormDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hashimotokouhei/Desktop/vue-calendar/frontend/src/components/events/EventFormDialog.vue","mtime":1639531804535},{"path":"/Users/hashimotokouhei/Desktop/vue-calendar/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hashimotokouhei/Desktop/vue-calendar/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgdmFsaWRhdGlvbk1peGluIH0gZnJvbSAndnVlbGlkYXRlJzsKaW1wb3J0IHsgcmVxdWlyZWQgfSBmcm9tICd2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMnOwoKaW1wb3J0IERpYWxvZ1NlY3Rpb24gZnJvbSAnLi4vbGF5b3V0cy9EaWFsb2dTZWN0aW9uJzsKaW1wb3J0IERhdGVGb3JtIGZyb20gJy4uL2Zvcm1zL0RhdGVGb3JtJzsKaW1wb3J0IFRpbWVGb3JtIGZyb20gJy4uL2Zvcm1zL1RpbWVGb3JtJzsKaW1wb3J0IFRleHRGb3JtIGZyb20gJy4uL2Zvcm1zL1RleHRGb3JtJzsKaW1wb3J0IENvbG9yRm9ybSBmcm9tICcuLi9mb3Jtcy9Db2xvckZvcm0nOwppbXBvcnQgQ2hlY2tCb3gKIGZyb20gJy4uL2Zvcm1zL0NoZWNrQm94JzsKaW1wb3J0IENhbGVuZGFyU2VsZWN0Rm9ybSBmcm9tICcuLi9mb3Jtcy9DYWxlbmRhclNlbGVjdEZvcm0nOwppbXBvcnQgeyBpc0dyZWF0ZXJFbmRUaGFuU3RhcnQgfSBmcm9tICcuLi8uLi9mdW5jdGlvbnMvZGF0ZXRpbWUnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdFdmVudEZvcm1EaWFsb2cnLAogIG1peGluczogW3ZhbGlkYXRpb25NaXhpbl0sCiAgY29tcG9uZW50czogewogICAgRGlhbG9nU2VjdGlvbiwKICAgIERhdGVGb3JtLAogICAgVGltZUZvcm0sCiAgICBUZXh0Rm9ybSwKICAgIENvbG9yRm9ybSwKICAgIENoZWNrQm94LAogICAgQ2FsZW5kYXJTZWxlY3RGb3JtLAogIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIG5hbWU6ICcnLAogICAgc3RhcnREYXRlOiBudWxsLAogICAgc3RhcnRUaW1lOiBudWxsLAogICAgZW5kRGF0ZTogbnVsbCwKICAgIGVuZFRpbWU6IG51bGwsCiAgICBkZXNjcmlwdGlvbjogJycsCiAgICBjb2xvcjogJycsCiAgICBhbGxEYXk6IGZhbHNlLAogICAgY2FsZW5kYXI6IG51bGwsCiAgfSksCiAgdmFsaWRhdGlvbnM6IHsKICAgIG5hbWU6IHsgcmVxdWlyZWQgfSwKICAgIHN0YXJ0RGF0ZTogeyByZXF1aXJlZCB9LAogICAgZW5kRGF0ZTogeyByZXF1aXJlZCB9LAogICAgY2FyZW5kYXI6IHsgcmVxdWlyZWQgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKCdldmVudHMnLCBbJ2V2ZW50J10pLAogICAgaXNJbnZhbGlkRGF0ZXRpbWUoKSB7CiAgICAgIHJldHVybiAhaXNHcmVhdGVyRW5kVGhhblN0YXJ0KHRoaXMuc3RhcnREYXRlLCB0aGlzLnN0YXJ0VGltZSwgdGhpcy5lbmREYXRlLCB0aGlzLmVuZFRpbWUsIHRoaXMuYWxsRGF5KTsKICAgIH0sCiAgICBpc0ludmFsaWQoKSB7CiAgICAgIC8vICR2LiRpbnZhbGTjga/mjIflrprjgZfjgZ/jg5Djg6rjg4fjg7zjgrfjg6fjg7Pjga7jganjgozjgYvjgYzjg57jg4Pjg4HjgZfjgarjgYTloLTlkIh0cnVl44KS6L+U44GZCiAgICAgIHJldHVybiB0aGlzLiR2LiRpbnZhbGlkIHx8IHRoaXMuaXNJbnZhbGlkRGF0ZXRpbWU7CiAgICB9LAogIH0sCiAgLy8gY3JlYXRlZOOBr1Z1ZeODqeOCpOODleOCteOCpOOCr+ODq+OBru+8keOBpOOBp+OAgeOCs+ODs+ODneODvOODjeODs+ODiOOBjOS9nOaIkOOBleOCjOOBn+W+jOOBq+Wun+ihjOOBmeOCi+WHpueQhuOCkuaMh+WumuOBmeOCi+OBk+OBqOOBjOOBp+OBjeOCiwogIC8vIHRoaXMuZXZlbnQuc3RhcnTjga9DYWxlbmRhcuOCs+ODs+ODneODvOODjeODs+ODiOOBrmluaXRFdmVudOODoeOCveODg+ODieOBp+OAgWV2ZW5044K544OG44O844OI44Gr5Luj5YWl44GX44Gf5YCk44KS5Y+W5b6X44GX44Gm44GE44KLCiAgLy8gRGF0ZUZvcm3jgrPjg7Pjg53jg7zjg43jg7Pjg4jjga5wcm9wc+OBp+WPl+OBkeWPluOCi3ZhbHVl44Gr44Gv44GT44Guc3RhcnREYXRl44Gu5YCk44GM5YWl44KLCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubmFtZSA9IHRoaXMuZXZlbnQubmFtZTsKICAgIHRoaXMuc3RhcnREYXRlID0gdGhpcy5ldmVudC5zdGFydERhdGU7CiAgICB0aGlzLnN0YXJ0VGltZSA9IHRoaXMuZXZlbnQuc3RhcnRUaW1lOwogICAgdGhpcy5lbmREYXRlID0gdGhpcy5ldmVudC5lbmREYXRlOwogICAgdGhpcy5lbmRUaW1lID0gdGhpcy5ldmVudC5lbmRUaW1lOwogICAgdGhpcy5kZXNjcmlwdGlvbiA9IHRoaXMuZXZlbnQuZGVzY3JpcHRpb247CiAgICB0aGlzLmNvbG9yID0gdGhpcy5ldmVudC5jb2xvcjsKICAgIC8vIHRpbWVk44Kr44Op44Og44Gv5pmC6ZaT5oyH5a6a44GM44GC44KM44GwdHJ1ZeOAgeOBquOBkeOCjOOBsGZhbHNl44KS6L+U44GZCiAgICB0aGlzLmFsbERheSA9IHRoaXMuZXZlbnQudGltZWQ7CiAgICB0aGlzLmNhbGVuZGFyID0gdGhpcy5ldmVudC5jYWxlbmRhcjsKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoJ2V2ZW50cycsIFsnc2V0RXZlbnQnLCAnc2V0RWRpdE1vZGUnLCAnY3JlYXRlRXZlbnQnLCAndXBkYXRlRXZlbnQnXSksCiAgICBjbG9zZURpYWxvZygpIHsKICAgICAgdGhpcy5zZXRFdmVudChudWxsKTsKICAgICAgdGhpcy5zZXRFZGl0TW9kZShmYWxzZSk7CiAgICB9LAogICAgc3VibWl0KCkgewogICAgICBpZiAodGhpcy5pc0ludmFsaWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIC8vIGlk44Gu5YCk44KS5Y+W44KK5Ye644GX44Gf44GE44Gu44Gn44K544OX44Os44OD44OJ5qeL5paH44Gn5YWo44Gm44Gu5bGe5oCn44KS5bGV6ZaL44GZ44KLCiAgICAgICAgLi4udGhpcy5ldmVudCwKICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgc3RhcnQ6IGAke3RoaXMuc3RhcnREYXRlfSAke3RoaXMuc3RhcnRUaW1lIHx8ICcnfWAsCiAgICAgICAgZW5kOiBgJHt0aGlzLmVuZERhdGV9ICR7dGhpcy5lbmRUaW1lIHx8ICcnfWAsCiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sCiAgICAgICAgY29sb3I6IHRoaXMuY29sb3IsCiAgICAgICAgLy8gdGltZWTjga7lgKTjgpLlj43ou6LjgZXjgZvjgovjga7jgach44KS44Gk44GR44KLCiAgICAgICAgdGltZWQ6ICF0aGlzLmFsbERheSwKICAgICAgICBjYWxlbmRhcl9pZDogdGhpcy5jYWxlbmRhci5pZCwKICAgICAgfTsKICAgICAgLy8gaWTjgYzjgYLjgozjgbDmm7TmlrDjgIHjgarjgZHjgozjgbDkvZzmiJDjga7jgqLjgq/jgrfjg6fjg7PjgpLlrp/ooYwKICAgICAgaWYgKHBhcmFtcy5pZCkgewogICAgICAgIHRoaXMudXBkYXRlRXZlbnQocGFyYW1zKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNyZWF0ZUV2ZW50KHBhcmFtcyk7CiAgICAgIH0KICAgICAgdGhpcy5jbG9zZURpYWxvZygpOwogICAgfSwKICAgIGNhbmNlbCgpIHsKICAgICAgdGhpcy5zZXRFZGl0TW9kZShmYWxzZSk7CiAgICAgIC8vIOaWsOimj+S9nOaIkOOBqOe3qOmbhuOBruOCouOCr+OCt+ODp+ODs+OCkuWIhuOBkeOCi+OBn+OCgeOBruadoeS7tuWIhuWykOOAgWlk44GM44Gq44GE44Go44GNKOaWsOimj+S9nOaIkOaZginjga/lhaXlipvlgKTjgpLjg6rjgrvjg4Pjg4jjgZnjgovli5XkvZwKICAgICAgaWYgKCF0aGlzLmV2ZW50LmlkKSB7CiAgICAgICAgdGhpcy5zZXRFdmVudChudWxsKTsKICAgICAgfQogICAgfSwKICAgIGNoYW5nZUNhbGVuZGFyKGNhbGVuZGFyKSB7CiAgICAgIHRoaXMuY29sb3IgPSBjYWxlbmRhci5jb2xvcjsKICAgICAgdGhpcy5jYWxlbmRhciA9IGNhbGVuZGFyOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["EventFormDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EventFormDialog.vue","sourceRoot":"src/components/events","sourcesContent":["<template>\n  <v-card class=\"pb-12\">\n    <v-card-actions class=\"d-flex justify-end pa-2\">\n      <v-btn icon @click=\"closeDialog\">\n        <v-icon size=\"20px\">mdi-close</v-icon>\n      </v-btn>\n    </v-card-actions>\n    <v-card-text>\n      <DialogSection icon=\"mdi-square\" :color=\"color\">\n        <v-text-field v-model=\"name\" label=\"タイトル\"></v-text-field>\n      </DialogSection>\n      <DialogSection icon=\"mdi-clock-outline\">\n        <!--v-date-pickerはVuetifyが提供する日付選択カレンダー-->\n        <!--v-modelにstartDate変数を指定している。こうすることでカレンダーで選択した日付の値がstartDate変数に代入される-->\n        <DateForm v-model=\"startDate\" />\n        <!--v-show='!allDay'を指定することで、allDay変数の値がfalseの時だけTimeFormコンポーネントが表示される-->\n        <div v-show=\"!allDay\">\n          <TimeForm v-model=\"startTime\" />\n        </div>\n        <span class=\"px-2\">-</span>\n        <DateForm v-model=\"endDate\" :isError=\"isInvalidDatetime\" />\n        <div v-show=\"!allDay\">\n          <TimeForm v-model=\"endTime\" :isError=\"isInvalidDatetime\" />\n        </div>\n      </DialogSection>\n      <DialogSection>\n        <CheckBox v-model=\"allDay\" label=\"終日\" class=\"ma-0 pa-0\" />\n      </DialogSection>\n      <DialogSection icon=\"mdi-card-text-outline\">\n        <TextForm v-model=\"description\" />\n      </DialogSection>\n      <DialogSection icon=\"mdi-calendar\">\n        <CalendarSelectForm :value=\"calendar\" @input=\"changeCalendar($event)\" />\n      </DialogSection>\n      <DialogSection icon=\"mid-palette\">\n        <ColorForm v-model=\"color\" />\n      </DialogSection>\n    </v-card-text>\n    <v-card-actions class=\"d-flex justify-end\">\n      <v-btn @click=\"cancel\">キャンセル</v-btn>\n      <!-- isInvalidがtrueの場合disabledでボタンを押せなくする-->\n      <v-btn :disabled=\"isInvalid\" @click=\"submit\">保存</v-btn>\n    </v-card-actions>\n  </v-card>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\nimport { validationMixin } from 'vuelidate';\nimport { required } from 'vuelidate/lib/validators';\n\nimport DialogSection from '../layouts/DialogSection';\nimport DateForm from '../forms/DateForm';\nimport TimeForm from '../forms/TimeForm';\nimport TextForm from '../forms/TextForm';\nimport ColorForm from '../forms/ColorForm';\nimport CheckBox\n from '../forms/CheckBox';\nimport CalendarSelectForm from '../forms/CalendarSelectForm';\nimport { isGreaterEndThanStart } from '../../functions/datetime';\n\nexport default {\n  name: 'EventFormDialog',\n  mixins: [validationMixin],\n  components: {\n    DialogSection,\n    DateForm,\n    TimeForm,\n    TextForm,\n    ColorForm,\n    CheckBox,\n    CalendarSelectForm,\n  },\n  data: () => ({\n    name: '',\n    startDate: null,\n    startTime: null,\n    endDate: null,\n    endTime: null,\n    description: '',\n    color: '',\n    allDay: false,\n    calendar: null,\n  }),\n  validations: {\n    name: { required },\n    startDate: { required },\n    endDate: { required },\n    carendar: { required },\n  },\n  computed: {\n    ...mapGetters('events', ['event']),\n    isInvalidDatetime() {\n      return !isGreaterEndThanStart(this.startDate, this.startTime, this.endDate, this.endTime, this.allDay);\n    },\n    isInvalid() {\n      // $v.$invaldは指定したバリデーションのどれかがマッチしない場合trueを返す\n      return this.$v.$invalid || this.isInvalidDatetime;\n    },\n  },\n  // createdはVueライフサイクルの１つで、コンポーネントが作成された後に実行する処理を指定することができる\n  // this.event.startはCalendarコンポーネントのinitEventメソッドで、eventステートに代入した値を取得している\n  // DateFormコンポーネントのpropsで受け取るvalueにはこのstartDateの値が入る\n  created() {\n    this.name = this.event.name;\n    this.startDate = this.event.startDate;\n    this.startTime = this.event.startTime;\n    this.endDate = this.event.endDate;\n    this.endTime = this.event.endTime;\n    this.description = this.event.description;\n    this.color = this.event.color;\n    // timedカラムは時間指定があればtrue、なければfalseを返す\n    this.allDay = this.event.timed;\n    this.calendar = this.event.calendar;\n  },\n  methods: {\n    ...mapActions('events', ['setEvent', 'setEditMode', 'createEvent', 'updateEvent']),\n    closeDialog() {\n      this.setEvent(null);\n      this.setEditMode(false);\n    },\n    submit() {\n      if (this.isInvalid) {\n        return;\n      }\n      const params = {\n        // idの値を取り出したいのでスプレッド構文で全ての属性を展開する\n        ...this.event,\n        name: this.name,\n        start: `${this.startDate} ${this.startTime || ''}`,\n        end: `${this.endDate} ${this.endTime || ''}`,\n        description: this.description,\n        color: this.color,\n        // timedの値を反転させるので!をつける\n        timed: !this.allDay,\n        calendar_id: this.calendar.id,\n      };\n      // idがあれば更新、なければ作成のアクションを実行\n      if (params.id) {\n        this.updateEvent(params);\n      } else {\n        this.createEvent(params);\n      }\n      this.closeDialog();\n    },\n    cancel() {\n      this.setEditMode(false);\n      // 新規作成と編集のアクションを分けるための条件分岐、idがないとき(新規作成時)は入力値をリセットする動作\n      if (!this.event.id) {\n        this.setEvent(null);\n      }\n    },\n    changeCalendar(calendar) {\n      this.color = calendar.color;\n      this.calendar = calendar;\n    },\n  },\n};\n</script>\n"]}]}