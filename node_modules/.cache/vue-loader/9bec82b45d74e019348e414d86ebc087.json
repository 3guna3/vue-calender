{"remainingRequest":"/Users/hashimotokouhei/Desktop/vue-calendar/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hashimotokouhei/Desktop/vue-calendar/frontend/src/components/events/EventFormDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hashimotokouhei/Desktop/vue-calendar/frontend/src/components/events/EventFormDialog.vue","mtime":1639531963632},{"path":"/Users/hashimotokouhei/Desktop/vue-calendar/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hashimotokouhei/Desktop/vue-calendar/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgdmFsaWRhdGlvbk1peGluIH0gZnJvbSAndnVlbGlkYXRlJzsKaW1wb3J0IHsgcmVxdWlyZWQgfSBmcm9tICd2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMnOwoKaW1wb3J0IERpYWxvZ1NlY3Rpb24gZnJvbSAnLi4vbGF5b3V0cy9EaWFsb2dTZWN0aW9uJzsKaW1wb3J0IERhdGVGb3JtIGZyb20gJy4uL2Zvcm1zL0RhdGVGb3JtJzsKaW1wb3J0IFRpbWVGb3JtIGZyb20gJy4uL2Zvcm1zL1RpbWVGb3JtJzsKaW1wb3J0IFRleHRGb3JtIGZyb20gJy4uL2Zvcm1zL1RleHRGb3JtJzsKaW1wb3J0IENvbG9yRm9ybSBmcm9tICcuLi9mb3Jtcy9Db2xvckZvcm0nOwppbXBvcnQgQ2hlY2tCb3ggZnJvbSAnLi4vZm9ybXMvQ2hlY2tCb3gnOwppbXBvcnQgQ2FsZW5kYXJTZWxlY3RGb3JtIGZyb20gJy4uL2Zvcm1zL0NhbGVuZGFyU2VsZWN0Rm9ybSc7CmltcG9ydCB7IGlzR3JlYXRlckVuZFRoYW5TdGFydCB9IGZyb20gJy4uLy4uL2Z1bmN0aW9ucy9kYXRldGltZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0V2ZW50Rm9ybURpYWxvZycsCiAgbWl4aW5zOiBbdmFsaWRhdGlvbk1peGluXSwKICBjb21wb25lbnRzOiB7CiAgICBEaWFsb2dTZWN0aW9uLAogICAgRGF0ZUZvcm0sCiAgICBUaW1lRm9ybSwKICAgIFRleHRGb3JtLAogICAgQ29sb3JGb3JtLAogICAgQ2hlY2tCb3gsCiAgICBDYWxlbmRhclNlbGVjdEZvcm0sCiAgfSwKICBkYXRhOiAoKSA9PiAoewogICAgbmFtZTogJycsCiAgICBzdGFydERhdGU6IG51bGwsCiAgICBzdGFydFRpbWU6IG51bGwsCiAgICBlbmREYXRlOiBudWxsLAogICAgZW5kVGltZTogbnVsbCwKICAgIGRlc2NyaXB0aW9uOiAnJywKICAgIGNvbG9yOiAnJywKICAgIGFsbERheTogZmFsc2UsCiAgICBjYWxlbmRhcjogbnVsbCwKICB9KSwKICB2YWxpZGF0aW9uczogewogICAgbmFtZTogeyByZXF1aXJlZCB9LAogICAgc3RhcnREYXRlOiB7IHJlcXVpcmVkIH0sCiAgICBlbmREYXRlOiB7IHJlcXVpcmVkIH0sCiAgICBjYWxlbmRhcjogeyByZXF1aXJlZCB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoJ2V2ZW50cycsIFsnZXZlbnQnXSksCiAgICBpc0ludmFsaWREYXRldGltZSgpIHsKICAgICAgcmV0dXJuICFpc0dyZWF0ZXJFbmRUaGFuU3RhcnQodGhpcy5zdGFydERhdGUsIHRoaXMuc3RhcnRUaW1lLCB0aGlzLmVuZERhdGUsIHRoaXMuZW5kVGltZSwgdGhpcy5hbGxEYXkpOwogICAgfSwKICAgIGlzSW52YWxpZCgpIHsKICAgICAgLy8gJHYuJGludmFsZOOBr+aMh+WumuOBl+OBn+ODkOODquODh+ODvOOCt+ODp+ODs+OBruOBqeOCjOOBi+OBjOODnuODg+ODgeOBl+OBquOBhOWgtOWQiHRydWXjgpLov5TjgZkKICAgICAgcmV0dXJuIHRoaXMuJHYuJGludmFsaWQgfHwgdGhpcy5pc0ludmFsaWREYXRldGltZTsKICAgIH0sCiAgfSwKICAvLyBjcmVhdGVk44GvVnVl44Op44Kk44OV44K144Kk44Kv44Or44Gu77yR44Gk44Gn44CB44Kz44Oz44Od44O844ON44Oz44OI44GM5L2c5oiQ44GV44KM44Gf5b6M44Gr5a6f6KGM44GZ44KL5Yem55CG44KS5oyH5a6a44GZ44KL44GT44Go44GM44Gn44GN44KLCiAgLy8gdGhpcy5ldmVudC5zdGFydOOBr0NhbGVuZGFy44Kz44Oz44Od44O844ON44Oz44OI44GuaW5pdEV2ZW5044Oh44K944OD44OJ44Gn44CBZXZlbnTjgrnjg4bjg7zjg4jjgavku6PlhaXjgZfjgZ/lgKTjgpLlj5blvpfjgZfjgabjgYTjgosKICAvLyBEYXRlRm9ybeOCs+ODs+ODneODvOODjeODs+ODiOOBrnByb3Bz44Gn5Y+X44GR5Y+W44KLdmFsdWXjgavjga/jgZPjga5zdGFydERhdGXjga7lgKTjgYzlhaXjgosKICBjcmVhdGVkKCkgewogICAgdGhpcy5uYW1lID0gdGhpcy5ldmVudC5uYW1lOwogICAgdGhpcy5zdGFydERhdGUgPSB0aGlzLmV2ZW50LnN0YXJ0RGF0ZTsKICAgIHRoaXMuc3RhcnRUaW1lID0gdGhpcy5ldmVudC5zdGFydFRpbWU7CiAgICB0aGlzLmVuZERhdGUgPSB0aGlzLmV2ZW50LmVuZERhdGU7CiAgICB0aGlzLmVuZFRpbWUgPSB0aGlzLmV2ZW50LmVuZFRpbWU7CiAgICB0aGlzLmRlc2NyaXB0aW9uID0gdGhpcy5ldmVudC5kZXNjcmlwdGlvbjsKICAgIHRoaXMuY29sb3IgPSB0aGlzLmV2ZW50LmNvbG9yOwogICAgLy8gdGltZWTjgqvjg6njg6Djga/mmYLplpPmjIflrprjgYzjgYLjgozjgbB0cnVl44CB44Gq44GR44KM44GwZmFsc2XjgpLov5TjgZkKICAgIHRoaXMuYWxsRGF5ID0gdGhpcy5ldmVudC50aW1lZDsKICAgIHRoaXMuY2FsZW5kYXIgPSB0aGlzLmV2ZW50LmNhbGVuZGFyOwogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucygnZXZlbnRzJywgWydzZXRFdmVudCcsICdzZXRFZGl0TW9kZScsICdjcmVhdGVFdmVudCcsICd1cGRhdGVFdmVudCddKSwKICAgIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLnNldEV2ZW50KG51bGwpOwogICAgICB0aGlzLnNldEVkaXRNb2RlKGZhbHNlKTsKICAgIH0sCiAgICBzdWJtaXQoKSB7CiAgICAgIGlmICh0aGlzLmlzSW52YWxpZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgLy8gaWTjga7lgKTjgpLlj5bjgorlh7rjgZfjgZ/jgYTjga7jgafjgrnjg5fjg6zjg4Pjg4nmp4vmlofjgaflhajjgabjga7lsZ7mgKfjgpLlsZXplovjgZnjgosKICAgICAgICAuLi50aGlzLmV2ZW50LAogICAgICAgIG5hbWU6IHRoaXMubmFtZSwKICAgICAgICBzdGFydDogYCR7dGhpcy5zdGFydERhdGV9ICR7dGhpcy5zdGFydFRpbWUgfHwgJyd9YCwKICAgICAgICBlbmQ6IGAke3RoaXMuZW5kRGF0ZX0gJHt0aGlzLmVuZFRpbWUgfHwgJyd9YCwKICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbiwKICAgICAgICBjb2xvcjogdGhpcy5jb2xvciwKICAgICAgICAvLyB0aW1lZOOBruWApOOCkuWPjei7ouOBleOBm+OCi+OBruOBpyHjgpLjgaTjgZHjgosKICAgICAgICB0aW1lZDogIXRoaXMuYWxsRGF5LAogICAgICAgIGNhbGVuZGFyX2lkOiB0aGlzLmNhbGVuZGFyLmlkLAogICAgICB9OwogICAgICAvLyBpZOOBjOOBguOCjOOBsOabtOaWsOOAgeOBquOBkeOCjOOBsOS9nOaIkOOBruOCouOCr+OCt+ODp+ODs+OCkuWun+ihjAogICAgICBpZiAocGFyYW1zLmlkKSB7CiAgICAgICAgdGhpcy51cGRhdGVFdmVudChwYXJhbXMpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY3JlYXRlRXZlbnQocGFyYW1zKTsKICAgICAgfQogICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7CiAgICB9LAogICAgY2FuY2VsKCkgewogICAgICB0aGlzLnNldEVkaXRNb2RlKGZhbHNlKTsKICAgICAgLy8g5paw6KaP5L2c5oiQ44Go57eo6ZuG44Gu44Ki44Kv44K344On44Oz44KS5YiG44GR44KL44Gf44KB44Gu5p2h5Lu25YiG5bKQ44CBaWTjgYzjgarjgYTjgajjgY0o5paw6KaP5L2c5oiQ5pmCKeOBr+WFpeWKm+WApOOCkuODquOCu+ODg+ODiOOBmeOCi+WLleS9nAogICAgICBpZiAoIXRoaXMuZXZlbnQuaWQpIHsKICAgICAgICB0aGlzLnNldEV2ZW50KG51bGwpOwogICAgICB9CiAgICB9LAogICAgY2hhbmdlQ2FsZW5kYXIoY2FsZW5kYXIpIHsKICAgICAgdGhpcy5jb2xvciA9IGNhbGVuZGFyLmNvbG9yOwogICAgICB0aGlzLmNhbGVuZGFyID0gY2FsZW5kYXI7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["EventFormDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EventFormDialog.vue","sourceRoot":"src/components/events","sourcesContent":["<template>\n  <v-card class=\"pb-12\">\n    <v-card-actions class=\"d-flex justify-end pa-2\">\n      <v-btn icon @click=\"closeDialog\">\n        <v-icon size=\"20px\">mdi-close</v-icon>\n      </v-btn>\n    </v-card-actions>\n    <v-card-text>\n      <DialogSection icon=\"mdi-square\" :color=\"color\">\n        <v-text-field v-model=\"name\" label=\"タイトル\"></v-text-field>\n      </DialogSection>\n      <DialogSection icon=\"mdi-clock-outline\">\n        <!--v-date-pickerはVuetifyが提供する日付選択カレンダー-->\n        <!--v-modelにstartDate変数を指定している。こうすることでカレンダーで選択した日付の値がstartDate変数に代入される-->\n        <DateForm v-model=\"startDate\" />\n        <!--v-show='!allDay'を指定することで、allDay変数の値がfalseの時だけTimeFormコンポーネントが表示される-->\n        <div v-show=\"!allDay\">\n          <TimeForm v-model=\"startTime\" />\n        </div>\n        <span class=\"px-2\">-</span>\n        <DateForm v-model=\"endDate\" :isError=\"isInvalidDatetime\" />\n        <div v-show=\"!allDay\">\n          <TimeForm v-model=\"endTime\" :isError=\"isInvalidDatetime\" />\n        </div>\n      </DialogSection>\n      <DialogSection>\n        <CheckBox v-model=\"allDay\" label=\"終日\" class=\"ma-0 pa-0\" />\n      </DialogSection>\n      <DialogSection icon=\"mdi-card-text-outline\">\n        <TextForm v-model=\"description\" />\n      </DialogSection>\n      <DialogSection icon=\"mdi-calendar\">\n        <CalendarSelectForm :value=\"calendar\" @input=\"changeCalendar($event)\" />\n      </DialogSection>\n      <DialogSection icon=\"mid-palette\">\n        <ColorForm v-model=\"color\" />\n      </DialogSection>\n    </v-card-text>\n    <v-card-actions class=\"d-flex justify-end\">\n      <v-btn @click=\"cancel\">キャンセル</v-btn>\n      <!-- isInvalidがtrueの場合disabledでボタンを押せなくする-->\n      <v-btn :disabled=\"isInvalid\" @click=\"submit\">保存</v-btn>\n    </v-card-actions>\n  </v-card>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\nimport { validationMixin } from 'vuelidate';\nimport { required } from 'vuelidate/lib/validators';\n\nimport DialogSection from '../layouts/DialogSection';\nimport DateForm from '../forms/DateForm';\nimport TimeForm from '../forms/TimeForm';\nimport TextForm from '../forms/TextForm';\nimport ColorForm from '../forms/ColorForm';\nimport CheckBox from '../forms/CheckBox';\nimport CalendarSelectForm from '../forms/CalendarSelectForm';\nimport { isGreaterEndThanStart } from '../../functions/datetime';\n\nexport default {\n  name: 'EventFormDialog',\n  mixins: [validationMixin],\n  components: {\n    DialogSection,\n    DateForm,\n    TimeForm,\n    TextForm,\n    ColorForm,\n    CheckBox,\n    CalendarSelectForm,\n  },\n  data: () => ({\n    name: '',\n    startDate: null,\n    startTime: null,\n    endDate: null,\n    endTime: null,\n    description: '',\n    color: '',\n    allDay: false,\n    calendar: null,\n  }),\n  validations: {\n    name: { required },\n    startDate: { required },\n    endDate: { required },\n    calendar: { required },\n  },\n  computed: {\n    ...mapGetters('events', ['event']),\n    isInvalidDatetime() {\n      return !isGreaterEndThanStart(this.startDate, this.startTime, this.endDate, this.endTime, this.allDay);\n    },\n    isInvalid() {\n      // $v.$invaldは指定したバリデーションのどれかがマッチしない場合trueを返す\n      return this.$v.$invalid || this.isInvalidDatetime;\n    },\n  },\n  // createdはVueライフサイクルの１つで、コンポーネントが作成された後に実行する処理を指定することができる\n  // this.event.startはCalendarコンポーネントのinitEventメソッドで、eventステートに代入した値を取得している\n  // DateFormコンポーネントのpropsで受け取るvalueにはこのstartDateの値が入る\n  created() {\n    this.name = this.event.name;\n    this.startDate = this.event.startDate;\n    this.startTime = this.event.startTime;\n    this.endDate = this.event.endDate;\n    this.endTime = this.event.endTime;\n    this.description = this.event.description;\n    this.color = this.event.color;\n    // timedカラムは時間指定があればtrue、なければfalseを返す\n    this.allDay = this.event.timed;\n    this.calendar = this.event.calendar;\n  },\n  methods: {\n    ...mapActions('events', ['setEvent', 'setEditMode', 'createEvent', 'updateEvent']),\n    closeDialog() {\n      this.setEvent(null);\n      this.setEditMode(false);\n    },\n    submit() {\n      if (this.isInvalid) {\n        return;\n      }\n      const params = {\n        // idの値を取り出したいのでスプレッド構文で全ての属性を展開する\n        ...this.event,\n        name: this.name,\n        start: `${this.startDate} ${this.startTime || ''}`,\n        end: `${this.endDate} ${this.endTime || ''}`,\n        description: this.description,\n        color: this.color,\n        // timedの値を反転させるので!をつける\n        timed: !this.allDay,\n        calendar_id: this.calendar.id,\n      };\n      // idがあれば更新、なければ作成のアクションを実行\n      if (params.id) {\n        this.updateEvent(params);\n      } else {\n        this.createEvent(params);\n      }\n      this.closeDialog();\n    },\n    cancel() {\n      this.setEditMode(false);\n      // 新規作成と編集のアクションを分けるための条件分岐、idがないとき(新規作成時)は入力値をリセットする動作\n      if (!this.event.id) {\n        this.setEvent(null);\n      }\n    },\n    changeCalendar(calendar) {\n      this.color = calendar.color;\n      this.calendar = calendar;\n    },\n  },\n};\n</script>\n"]}]}